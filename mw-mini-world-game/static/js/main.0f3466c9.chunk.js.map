{"version":3,"sources":["components/Crosshair.jsx","components/UI.jsx","prefabs/Plane.jsx","hooks/useVariable.js","prefabs/Bullet.jsx","components/Model.jsx","prefabs/Player.jsx","hooks/useKeyboardInput.js","hooks/useMouseInput.js","prefabs/Skybox.jsx","prefabs/Cube.jsx","scene/DefaultScene.jsx","App.js","index.js"],"names":["CrosshairStyle","styled","div","Crosshair","ScreenContainer","UI","children","Plane","usePlane","rotation","Math","PI","position","material","friction","ref","receiveShadow","scale","color","useVariable","state","varRef","useRef","useEffect","current","Bullet","props","useSphere","mass","args","sphereRef","castShadow","Model","modelUrl","animate","gltf","useLoader","GLTFLoader","model","scene","set","object","podPositions","Player","fixedRotation","api","useState","bullets","setBullets","pressed","keysToListen","getKeys","useCallback","lowerCaseArray","hookReturn","forEach","key","lowerCaseKey","toLowerCase","push","keysPressed","setPressedKeys","handleKeyDown","e","lowerKey","includes","handleKeyUp","document","addEventListener","removeEventListener","useKeyboardInput","pressedMouse","left","right","handleMouseDown","button","handleMouseUp","useMouseInput","input","mouseInput","useThree","camera","timeToShoot","timeTojump","vel","jumping","moving","podPosition","velocity","subscribe","v","length","useFrame","w","s","a","d","Vector3","cameraDirection","getWorldDirection","forward","setFromMatrixColumn","matrix","crossVectors","up","horizontal","vertical","add","clone","multiplyScalar","clampLength","x","z","movingV","newPosition","ceil","y","Raycaster","intersectObjects","bulletDirection","bulletPosition","now","Date","id","map","bullet","Skybox","background","CubeTextureLoader","setPath","load","Cube","setColor","useBox","restitution","cubeRef","niceColors","floor","random","layers","extend","PointerLockControls","DefaultScene","gl","controls","enable","handleFocus","lock","domElement","intensity","gravity","tolerance","iterations","broadphase","cubeX1","cubeX2","cubeX3","App","shadowMap","dpr","frameloop","rootElement","getElementById","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.0f3466c9.chunk.js","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\n\nconst CrosshairStyle = styled.div`\n  height: 5px;\n  width: 5px;\n  background-color: white;\n  border-radius: 50%;\n  border: solid 1px gray;\n  margin: auto;\n`;\n\nexport const Crosshair = () => {\n  return <CrosshairStyle />;\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst ScreenContainer = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  z-index: 100;\n`;\n\nexport const UI = ({ children }) => {\n  return <ScreenContainer>{children}</ScreenContainer>;\n};\n","import React, { useEffect } from \"react\";\nimport { usePlane } from \"@react-three/cannon\";\n\nexport const Plane = () => {\n  const [ref, api] = usePlane(() => ({\n    rotation: [-Math.PI / 2, 0, 0],\n    position: [0, -0.25, 0],\n    material: {\n      friction: 0.1\n    }\n  }));\n\n  return (\n    <mesh ref={ref} receiveShadow={true} scale={[1000, 1000, 1000]}>\n      <planeBufferGeometry />\n      <meshPhongMaterial color={\"skyblue\"} receiveShadow />\n    </mesh>\n  );\n};\n","import { useEffect, useRef } from \"react\";\n\nexport const useVariable = (state) => {\n  const varRef = useRef(state);\n\n  useEffect(() => {\n    varRef.current = state;\n  }, [state]);\n\n  return varRef;\n};\n","import { useSphere } from \"@react-three/cannon\";\nimport React from \"react\";\n\nexport const Bullet = (props) => {\n  const [sphereRef, api] = useSphere(() => ({\n    mass: 5,\n    args: 0.1,\n    ...props\n  }));\n\n  return (\n    <mesh ref={sphereRef} castShadow>\n      <sphereBufferGeometry args={[0.1, 32, 32]} />\n      <meshLambertMaterial color=\"hotpink\" />\n    </mesh>\n  );\n};\n","import * as THREE from \"three\";\nimport {useLoader,useFrame} from \"react-three-fiber\";\nimport {GLTFLoader} from \"three/examples/jsm/loaders/GLTFLoader\";\nimport React, {useEffect} from \"react\";\n\nconst Model = ({modelUrl,scale,animate,...props}) => {\n      const gltf = useLoader(GLTFLoader, \"./models/\" + modelUrl);\n\n      const model = gltf.scene\n      scale && model.scale.set(scale,scale,scale)\n\n      //\n      // let mixer\n      // if (gltf.animations.length) {\n      //       mixer = new THREE.AnimationMixer(gltf.scene);\n      //       gltf.animations.forEach(clip => {\n      //             const action = mixer.clipAction(clip)\n      //             action.play();\n      //       });\n      // }\n      //\n      // useFrame((state, delta) => {\n      //       mixer?.update(delta)\n      // })\n\n      return (\n          <group {...props} >\n            <primitive object={gltf.scene} />\n          </group>\n      );\n};\n\nexport default Model\n","import { useSphere } from \"@react-three/cannon\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useFrame, useThree } from \"react-three-fiber\";\nimport { Vector3 } from \"three\";\nimport { useKeyboardInput } from \"../hooks/useKeyboardInput\";\nimport { useMouseInput } from \"../hooks/useMouseInput\";\nimport { useVariable } from \"../hooks/useVariable\";\nimport { Bullet } from \"./Bullet\";\nimport { Raycaster } from \"three\";\nimport Model from \"../components/Model\";\n\nconst speed = 10;\nconst bulletSpeed = 35;\nconst bulletCoolDown = 300;\nconst movingSpeed = 50;\nconst jumpSpeed = 5;\nconst jumpCoolDown = 400;\nconst podPositions = [0,-37,-88,-140]\n\nexport const Player = () => {\n  const [sphereRef, api] = useSphere(() => ({\n    mass: 100,\n    fixedRotation: true,\n    position: [0, 0, 0],\n    args: 0.25,\n    material: {\n      friction: 0\n    }\n  }));\n  const [bullets, setBullets] = useState([]);\n  const pressed = useKeyboardInput([\"w\", \"a\", \"s\", \"d\", \" \"]);\n  const pressedMouse = useMouseInput();\n\n  const input = useVariable(pressed);\n  const mouseInput = useVariable(pressedMouse);\n\n  const { camera, scene } = useThree();\n\n  const state = useRef({\n    timeToShoot: 0,\n    timeTojump: 0,\n    vel: [0, 0, 0],\n    jumping: false,\n    moving: false,\n    podPosition: 0\n  });\n\n  useEffect(() => {\n    api.velocity.subscribe((v) => (state.current.vel = v));\n  }, [api]);\n\n  //set pod position while press space\n  const space = input.current[\" \"];\n  if(space && !state.current.moving){\n    if(state.current.podPosition === (podPositions.length - 1))\n      state.current.podPosition = 0\n    else\n      state.current.podPosition += 1\n\n    state.current.moving = true\n  }\n\n  useFrame(() => {\n    const { w, s, a, d } = input.current;\n    const space = input.current[\" \"];\n\n    let velocity = new Vector3(0, 0, 0);\n    let cameraDirection = new Vector3();\n    camera.getWorldDirection(cameraDirection);\n\n    let forward = new Vector3();\n    forward.setFromMatrixColumn(camera.matrix, 0);\n    forward.crossVectors(camera.up, forward);\n\n    let right = new Vector3();\n    right.setFromMatrixColumn(camera.matrix, 0);\n\n    let [horizontal, vertical] = [0, 0];\n\n    if (w) {\n      vertical += 1;\n    }\n    if (s) {\n      vertical -= 1;\n    }\n    if (d) {\n      horizontal += 1;\n    }\n    if (a) {\n      horizontal -= 1;\n    }\n\n    if (horizontal !== 0 && vertical !== 0) {\n      velocity\n        .add(forward.clone().multiplyScalar(speed * vertical))\n        .add(right.clone().multiplyScalar(speed * horizontal));\n      velocity.clampLength(-5, 5);\n    } else if (horizontal !== 0) {\n      velocity.add(right.clone().multiplyScalar(speed * horizontal));\n    } else if (vertical !== 0) {\n      velocity.add(forward.clone().multiplyScalar(speed * vertical));\n    }\n\n    api.velocity.set(velocity.x, state.current.vel[1], velocity.z);\n\n    //Moving\n    let [movingH, movingV] = [0, 0];\n    if(state.current.moving){\n      const newPosition = podPositions[state.current.podPosition];\n      if (Math.ceil(sphereRef.current.position.z) != newPosition) {\n        if (sphereRef.current.position.z > newPosition) {\n          movingV += 1;\n        } else {\n          movingV -= 1;\n        }\n      }\n\n      // if (Math.ceil(sphereRef.current.position.z) != 4) {\n      //   if (sphereRef.current.position.x < 4) {\n      //     movingH += 1;\n      //   } else {\n      //     movingH -= 1;\n      //   }\n      // }\n\n      if (movingH !== 0 && movingV !== 0) {\n        velocity\n            .add(forward.clone().multiplyScalar(movingSpeed * movingV))\n            .add(right.clone().multiplyScalar(movingSpeed * movingH));\n        velocity.clampLength(-5, 5);\n      } else if (movingH !== 0) {\n        velocity.add(right.clone().multiplyScalar(movingSpeed * movingH));\n      } else if (movingV !== 0) {\n        velocity.add(forward.clone().multiplyScalar(movingSpeed * movingV));\n      }else{\n        state.current.moving = false\n      }\n\n      api.velocity.set(velocity.x, state.current.vel[1], velocity.z);\n\n    }\n\n\n    camera.position.set(\n      sphereRef.current.position.x,\n      sphereRef.current.position.y + 2,\n      sphereRef.current.position.z + 5\n    );\n\n    if (state.current.jumping && state.current.vel[1] < 0) {\n      const raycaster = new Raycaster(\n        sphereRef.current.position,\n        new Vector3(0, -1, 0),\n        0,\n        0.5\n      );\n      const intersects = raycaster.intersectObjects(scene.children);\n      if (intersects.length !== 0) {\n        state.current.jumping = false;\n      }\n    }\n\n\n    // if (space && !state.current.jumping) {\n    //   const now = Date.now();\n    //   if (now > state.current.timeTojump) {\n    //     state.current.timeTojump = now + jumpCoolDown;\n    //     state.current.jumping = true;\n    //     api.velocity.set(state.current.vel[0], state.current.vel[1], -1000);\n    //   }\n    // }\n\n    //console.log(sphereRef.current.position)\n\n    const bulletDirection = cameraDirection.clone().multiplyScalar(bulletSpeed);\n    const bulletPosition = camera.position\n      .clone()\n      .add(cameraDirection.clone().multiplyScalar(2));\n\n    if (mouseInput.current.left) {\n      const now = Date.now();\n      if (now >= state.current.timeToShoot) {\n        state.current.timeToShoot = now + bulletCoolDown;\n        setBullets((bullets) => [\n          ...bullets,\n          {\n            id: now,\n            position: [bulletPosition.x, bulletPosition.y, bulletPosition.z],\n            forward: [bulletDirection.x, bulletDirection.y, bulletDirection.z]\n          }\n        ]);\n      }\n    }\n\n  });\n\n\n  return (\n    <>\n      {bullets.map((bullet) => {\n        return (\n          <Bullet\n            key={bullet.id}\n            velocity={bullet.forward}\n            position={bullet.position}\n          />\n        );\n      })}\n\n      <group ref={sphereRef}>\n        <Model modelUrl={'water-pot.glb'} scale={1.5}/>\n      </group>\n\n      {/*<mesh ref={sphereRef}>*/}\n      {/*  <sphereBufferGeometry args={[1, 32, 32]} />*/}\n      {/*  <meshPhongMaterial color={\"red\"} />*/}\n      {/*</mesh>*/}\n    </>\n  );\n};\n","import { useCallback, useEffect, useState } from \"react\";\n\nexport const useKeyboardInput = (keysToListen = []) => {\n  const getKeys = useCallback(() => {\n    const lowerCaseArray = [];\n    const hookReturn = {};\n\n    keysToListen.forEach((key) => {\n      const lowerCaseKey = key.toLowerCase();\n      lowerCaseArray.push(lowerCaseKey);\n      hookReturn[lowerCaseKey] = false;\n    });\n\n    return {\n      lowerCaseArray,\n      hookReturn\n    };\n  }, [keysToListen]);\n\n  const [keysPressed, setPressedKeys] = useState(getKeys().hookReturn);\n\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      const lowerKey = e.key.toLowerCase();\n      if (getKeys().lowerCaseArray.includes(lowerKey)) {\n        setPressedKeys((keysPressed) => ({ ...keysPressed, [lowerKey]: true }));\n      }\n    };\n    const handleKeyUp = (e) => {\n      const lowerKey = e.key.toLowerCase();\n      if (getKeys().lowerCaseArray.includes(lowerKey)) {\n        setPressedKeys((keysPressed) => ({\n          ...keysPressed,\n          [lowerKey]: false\n        }));\n      }\n    };\n\n    document.addEventListener(\"keydown\", handleKeyDown);\n    document.addEventListener(\"keyup\", handleKeyUp);\n\n    return () => {\n      document.removeEventListener(\"keydown\", handleKeyDown);\n      document.removeEventListener(\"keyup\", handleKeyUp);\n    };\n  }, [keysToListen, getKeys]);\n\n  return keysPressed;\n};\n","import { useCallback, useEffect, useState } from \"react\";\n\nexport const useMouseInput = () => {\n  const [keysPressed, setPressedKeys] = useState({ left: false, right: false });\n\n  useEffect(() => {\n    const handleMouseDown = (e) => {\n      if (e.button === 1) {\n        setPressedKeys((current) => ({ ...current, right: true }));\n      } else if (e.button === 0) {\n        setPressedKeys((current) => ({ ...current, left: true }));\n      }\n    };\n    const handleMouseUp = (e) => {\n      if (e.button === 1) {\n        setPressedKeys((current) => ({ ...current, right: false }));\n      } else if (e.button === 0) {\n        setPressedKeys((current) => ({ ...current, left: false }));\n      }\n    };\n\n    document.addEventListener(\"mousedown\", handleMouseDown);\n    document.addEventListener(\"mouseup\", handleMouseUp);\n\n    return () => {\n      document.removeEventListener(\"mousedown\", handleMouseDown);\n      document.removeEventListener(\"mouseup\", handleMouseUp);\n    };\n  }, []);\n\n  return keysPressed;\n};\n","import React, { useEffect } from \"react\";\nimport { useThree } from \"react-three-fiber\";\nimport { CubeTextureLoader } from \"three\";\n\nexport const Skybox = () => {\n  const { scene } = useThree();\n\n  useEffect(() => {\n    scene.background = new CubeTextureLoader()\n      .setPath(\"textures/skybox/\")\n      .load([\n        \"left.jpg\",\n        \"right.jpg\",\n        \"top.jpg\",\n        \"bottom.jpg\",\n        \"back.jpg\",\n        \"front.jpg\"\n      ]);\n  }, [scene]);\n\n  return <> </>;\n};\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport { useBox } from \"@react-three/cannon\";\nimport niceColors from \"nice-color-palettes\";\nconst paletteIndex = 8;\n\nexport const Cube = (props) => {\n  const [color, setColor] = useState(\"white\");\n  const [cubeRef, api] = useBox(() => ({\n    mass: 1,\n    args: [0.5, 0.5, 0.5],\n    material: {\n      friction: 1,\n      restitution: 0\n    },\n    ...props\n  }));\n\n  useEffect(\n    () =>\n      setColor(\n        niceColors[paletteIndex][\n          Math.floor(Math.random() * niceColors[paletteIndex].length)\n        ]\n      ),\n    []\n  );\n\n  return (\n    <mesh ref={cubeRef} castShadow layers={props.layers}>\n      <boxBufferGeometry args={[0.5, 0.5, 0.5]} />\n      <meshLambertMaterial color={color} />\n    </mesh>\n  );\n};\n","import { Physics } from \"@react-three/cannon\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { extend, useThree } from \"react-three-fiber\";\nimport { Plane } from \"../prefabs/Plane\";\nimport { Player } from \"../prefabs/Player\";\nimport { PointerLockControls } from \"three/examples/jsm/controls/PointerLockControls\";\nimport { Skybox } from \"../prefabs/Skybox\";\nimport { Cube } from \"../prefabs/Cube\";\nimport Model from \"../components/Model\";\n\n\nextend({ PointerLockControls });\n\nexport const DefaultScene = () => {\n  const { camera, gl } = useThree();\n  const controls = useRef();\n\n      const cubeX1 = -5\n      const cubeX2 = 5\n      const cubeX3 = 10\n      const cubeZ1 = -145\n      const cubeZ2 = -155\n      const cubeZ3 = -150\n\n  useEffect(() => {\n    camera.layers.enable(0);\n    camera.layers.enable(1);\n  }, [camera]);\n\n  useEffect(() => {\n    const handleFocus = () => {\n      controls.current.lock();\n    };\n    document.addEventListener(\"click\", handleFocus);\n\n    return () => {\n      document.removeEventListener(\"click\", handleFocus);\n    };\n  }, [gl]);\n\n\n  return (\n    <>\n      <Skybox />\n      <pointerLockControls ref={controls} args={[camera, gl.domElement]} />\n      <directionalLight position={[3, 0, 3]} intensity={0.5} castShadow />\n      <pointLight position={[0, 0, -3]} intensity={0.6} castShadow />\n      <pointLight position={[0, 0, 4]} intensity={0.6} castShadow />\n\n      <ambientLight intensity={0.6} />\n      <Physics\n        gravity={[0, -18, 0]}\n        tolerance={0}\n        iterations={50}\n        broadphase={\"SAP\"}\n      >\n        <Player />\n        <Plane />\n\n            <Model modelUrl={\"miniworld.glb\"} position={[10,0,-150]} rotation={[0,-1.45,0]} />\n            <Model modelUrl={\"MiniWorld_mountainLab.glb\"} position={[5,0,-100]}  rotation={[0,-1.45,0]}/>\n            <Model modelUrl={\"MiniWorld_westernTreatmentPlan.glb\"} position={[0,0,-50]}  />\n            <Model modelUrl={\"MiniWorld_waterPad.glb\"} position={[0,0,-15]}  rotation={[0,-1.45,0]}/>\n\n            <Cube position={[cubeX1, 0, cubeZ1]} layers={1} />\n            <Cube position={[cubeX1-0.6, 0, cubeZ1]} />\n            <Cube position={[cubeX1+0.6, 0, cubeZ1]} />\n            <Cube position={[cubeX1-0.3, 0.5, cubeZ1]} />\n            <Cube position={[cubeX1+0.3, 0.5, cubeZ1]} />\n            <Cube position={[cubeX1, 1, cubeZ1]} />\n\n            <Cube position={[cubeX2, 0, cubeZ2]} layers={1} />\n            <Cube position={[cubeX2-0.6, 0, cubeZ2]} />\n            <Cube position={[cubeX2+0.6, 0, cubeZ2]} />\n            <Cube position={[cubeX2-0.3, 0.5, cubeZ2]} />\n            <Cube position={[cubeX2+0.3, 0.5, cubeZ2]} />\n            <Cube position={[cubeX2, 1, cubeZ2]} />\n\n            <Cube position={[cubeX3, 0, cubeZ3]} layers={1} />\n            <Cube position={[cubeX3-0.6, 0, cubeZ3]} />\n            <Cube position={[cubeX3+0.6, 0, cubeZ3]} />\n            <Cube position={[cubeX3-0.3, 0.5, cubeZ3]} />\n            <Cube position={[cubeX3+0.3, 0.5, cubeZ3]} />\n            <Cube position={[cubeX3, 1, cubeZ3]} />\n\n\n            <Cube position={[-5, 0, cubeZ3]} />\n            <Cube position={[-5, 0.5, cubeZ3]} />\n            <Cube position={[-5, 1, cubeZ3]} />\n            <Cube position={[-5, 1.5, cubeZ3]} />\n\n      </Physics>\n    </>\n  );\n};\n","import React from \"react\";\nimport { Canvas } from \"react-three-fiber\";\nimport { Crosshair } from \"./components/Crosshair\";\nimport { UI } from \"./components/UI\";\nimport { DefaultScene } from \"./scene/DefaultScene\";\nimport \"./styles.css\";\n\nexport default function App() {\n  return (\n    <>\n      <UI>\n        <Crosshair />\n      </UI>\n      <Canvas shadowMap dpr={1} frameloop=\"demand\">\n        <DefaultScene />\n      </Canvas>\n    </>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}