(this["webpackJsonpfirst-person-controller"]=this["webpackJsonpfirst-person-controller"]||[]).push([[0],{36:function(e,t,n){e.exports=n(49)},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var r,a,o=n(0),c=n.n(o),i=n(28),l=n.n(i),u=n(8),s=n(15),m=n(16),d=m.a.div(r||(r=Object(s.a)(["\n  height: 5px;\n  width: 5px;\n  background-color: white;\n  border-radius: 50%;\n  border: solid 1px gray;\n  margin: auto;\n"]))),p=function(){return c.a.createElement(d,null)},f=m.a.div(a||(a=Object(s.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  z-index: 100;\n"]))),b=function(e){var t=e.children;return c.a.createElement(f,null,t)},E=n(50),v=n(6),j=function(){var e=Object(E.f)((function(){return{rotation:[-Math.PI/2,0,0],position:[0,-.25,0],material:{friction:.1}}})),t=Object(v.a)(e,2),n=t[0];t[1];return c.a.createElement("mesh",{ref:n,receiveShadow:!0,scale:[1e3,1e3,1e3]},c.a.createElement("planeBufferGeometry",null),c.a.createElement("meshPhongMaterial",{color:"skyblue",receiveShadow:!0}))},h=n(7),g=n(1),O=n(5),y=n(4),w=function(e){var t=Object(o.useRef)(e);return Object(o.useEffect)((function(){t.current=e}),[e]),t},L=function(e){var t=Object(E.e)((function(){return Object(y.a)({mass:5,args:.1},e)})),n=Object(v.a)(t,2),r=n[0];n[1];return c.a.createElement("mesh",{ref:r,castShadow:!0},c.a.createElement("sphereBufferGeometry",{args:[.1,32,32]}),c.a.createElement("meshLambertMaterial",{color:"hotpink"}))},k=n(9),S=n(34),x=["modelUrl","scale","animate"],M=function(e){var t=e.modelUrl,n=e.scale,r=(e.animate,Object(k.a)(e,x)),a=Object(u.d)(S.a,"./models/"+t),o=a.scene;return n&&o.scale.set(n,n,n),c.a.createElement("group",r,c.a.createElement("primitive",{object:a.scene}))},C=[0,-37,-88,-140],P=function(){var e=Object(E.e)((function(){return{mass:100,fixedRotation:!0,position:[0,0,0],args:.25,material:{friction:0}}})),t=Object(v.a)(e,2),n=t[0],r=t[1],a=Object(o.useState)([]),i=Object(v.a)(a,2),l=i[0],s=i[1],m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(o.useCallback)((function(){var t=[],n={};return e.forEach((function(e){var r=e.toLowerCase();t.push(r),n[r]=!1})),{lowerCaseArray:t,hookReturn:n}}),[e]),n=Object(o.useState)(t().hookReturn),r=Object(v.a)(n,2),a=r[0],c=r[1];return Object(o.useEffect)((function(){var e=function(e){var n=e.key.toLowerCase();t().lowerCaseArray.includes(n)&&c((function(e){return Object(y.a)(Object(y.a)({},e),{},Object(O.a)({},n,!0))}))},n=function(e){var n=e.key.toLowerCase();t().lowerCaseArray.includes(n)&&c((function(e){return Object(y.a)(Object(y.a)({},e),{},Object(O.a)({},n,!1))}))};return document.addEventListener("keydown",e),document.addEventListener("keyup",n),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",n)}}),[e,t]),a}(["w","a","s","d"," "]),d=function(){var e=Object(o.useState)({left:!1,right:!1}),t=Object(v.a)(e,2),n=t[0],r=t[1];return Object(o.useEffect)((function(){var e=function(e){1===e.button?r((function(e){return Object(y.a)(Object(y.a)({},e),{},{right:!0})})):0===e.button&&r((function(e){return Object(y.a)(Object(y.a)({},e),{},{left:!0})}))},t=function(e){1===e.button?r((function(e){return Object(y.a)(Object(y.a)({},e),{},{right:!1})})):0===e.button&&r((function(e){return Object(y.a)(Object(y.a)({},e),{},{left:!1})}))};return document.addEventListener("mousedown",e),document.addEventListener("mouseup",t),function(){document.removeEventListener("mousedown",e),document.removeEventListener("mouseup",t)}}),[]),n}(),p=w(m),f=w(d),b=Object(u.e)(),j=b.camera,k=b.scene,S=Object(o.useRef)({timeToShoot:0,timeTojump:0,vel:[0,0,0],jumping:!1,moving:!1,podPosition:0});return Object(o.useEffect)((function(){r.velocity.subscribe((function(e){return S.current.vel=e}))}),[r]),p.current[" "]&&!S.current.moving&&(S.current.podPosition===C.length-1?S.current.podPosition=0:S.current.podPosition+=1,S.current.moving=!0),Object(u.c)((function(){var e=p.current,t=e.w,a=e.s,o=e.a,c=e.d,i=(p.current[" "],new g.Vector3(0,0,0)),l=new g.Vector3;j.getWorldDirection(l);var u=new g.Vector3;u.setFromMatrixColumn(j.matrix,0),u.crossVectors(j.up,u);var m=new g.Vector3;m.setFromMatrixColumn(j.matrix,0);var d=0,b=0;t&&(b+=1),a&&(b-=1),c&&(d+=1),o&&(d-=1),0!==d&&0!==b?(i.add(u.clone().multiplyScalar(10*b)).add(m.clone().multiplyScalar(10*d)),i.clampLength(-5,5)):0!==d?i.add(m.clone().multiplyScalar(10*d)):0!==b&&i.add(u.clone().multiplyScalar(10*b)),r.velocity.set(i.x,S.current.vel[1],i.z);var E=0;if(S.current.moving){var v=C[S.current.podPosition];Math.ceil(n.current.position.z)!=v&&(n.current.position.z>v?E+=1:E-=1),0!==E?i.add(u.clone().multiplyScalar(50*E)):S.current.moving=!1,r.velocity.set(i.x,S.current.vel[1],i.z)}(j.position.set(n.current.position.x,n.current.position.y+2,n.current.position.z+5),S.current.jumping&&S.current.vel[1]<0)&&(0!==new g.Raycaster(n.current.position,new g.Vector3(0,-1,0),0,.5).intersectObjects(k.children).length&&(S.current.jumping=!1));var O=l.clone().multiplyScalar(35),y=j.position.clone().add(l.clone().multiplyScalar(2));if(f.current.left){var w=Date.now();w>=S.current.timeToShoot&&(S.current.timeToShoot=w+300,s((function(e){return[].concat(Object(h.a)(e),[{id:w,position:[y.x,y.y,y.z],forward:[O.x,O.y,O.z]}])})))}})),c.a.createElement(c.a.Fragment,null,l.map((function(e){return c.a.createElement(L,{key:e.id,velocity:e.forward,position:e.position})})),c.a.createElement("group",{ref:n},c.a.createElement(M,{modelUrl:"water-pot.glb",scale:1.5})))},z=n(35),R=function(){var e=Object(u.e)().scene;return Object(o.useEffect)((function(){e.background=(new g.CubeTextureLoader).setPath("textures/skybox/").load(["left.jpg","right.jpg","top.jpg","bottom.jpg","back.jpg","front.jpg"])}),[e]),c.a.createElement(c.a.Fragment,null," ")},U=n(26),F=function(e){var t=Object(o.useState)("white"),n=Object(v.a)(t,2),r=n[0],a=n[1],i=Object(E.c)((function(){return Object(y.a)({mass:1,args:[.5,.5,.5],material:{friction:1,restitution:0}},e)})),l=Object(v.a)(i,2),u=l[0];l[1];return Object(o.useEffect)((function(){return a(U[8][Math.floor(Math.random()*U[8].length)])}),[]),c.a.createElement("mesh",{ref:u,castShadow:!0,layers:e.layers},c.a.createElement("boxBufferGeometry",{args:[.5,.5,.5]}),c.a.createElement("meshLambertMaterial",{color:r}))};Object(u.b)({PointerLockControls:z.a});var T=function(){var e=Object(u.e)(),t=e.camera,n=e.gl,r=Object(o.useRef)();return Object(o.useEffect)((function(){t.layers.enable(0),t.layers.enable(1)}),[t]),Object(o.useEffect)((function(){var e=function(){r.current.lock()};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[n]),c.a.createElement(c.a.Fragment,null,c.a.createElement(R,null),c.a.createElement("pointerLockControls",{ref:r,args:[t,n.domElement]}),c.a.createElement("directionalLight",{position:[3,0,3],intensity:.5,castShadow:!0}),c.a.createElement("pointLight",{position:[0,0,-3],intensity:.6,castShadow:!0}),c.a.createElement("pointLight",{position:[0,0,4],intensity:.6,castShadow:!0}),c.a.createElement("ambientLight",{intensity:.6}),c.a.createElement(E.a,{gravity:[0,-18,0],tolerance:0,iterations:50,broadphase:"SAP"},c.a.createElement(P,null),c.a.createElement(j,null),c.a.createElement(M,{modelUrl:"miniworld.glb",position:[10,0,-150],rotation:[0,-1.45,0]}),c.a.createElement(M,{modelUrl:"MiniWorld_mountainLab.glb",position:[5,0,-100],rotation:[0,-1.45,0]}),c.a.createElement(M,{modelUrl:"MiniWorld_westernTreatmentPlan.glb",position:[0,0,-50]}),c.a.createElement(M,{modelUrl:"MiniWorld_waterPad.glb",position:[0,0,-15],rotation:[0,-1.45,0]}),c.a.createElement(F,{position:[-5,0,-145],layers:1}),c.a.createElement(F,{position:[-5.6,0,-145]}),c.a.createElement(F,{position:[-4.4,0,-145]}),c.a.createElement(F,{position:[-5.3,.5,-145]}),c.a.createElement(F,{position:[-4.7,.5,-145]}),c.a.createElement(F,{position:[-5,1,-145]}),c.a.createElement(F,{position:[5,0,-155],layers:1}),c.a.createElement(F,{position:[4.4,0,-155]}),c.a.createElement(F,{position:[5.6,0,-155]}),c.a.createElement(F,{position:[4.7,.5,-155]}),c.a.createElement(F,{position:[5.3,.5,-155]}),c.a.createElement(F,{position:[5,1,-155]}),c.a.createElement(F,{position:[10,0,-150],layers:1}),c.a.createElement(F,{position:[9.4,0,-150]}),c.a.createElement(F,{position:[10.6,0,-150]}),c.a.createElement(F,{position:[9.7,.5,-150]}),c.a.createElement(F,{position:[10.3,.5,-150]}),c.a.createElement(F,{position:[10,1,-150]}),c.a.createElement(F,{position:[-5,0,-150]}),c.a.createElement(F,{position:[-5,.5,-150]}),c.a.createElement(F,{position:[-5,1,-150]}),c.a.createElement(F,{position:[-5,1.5,-150]})))};n(48);function V(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(b,null,c.a.createElement(p,null)),c.a.createElement(u.a,{shadowMap:!0,dpr:1,frameloop:"demand"},c.a.createElement(T,null)))}var A=document.getElementById("root");l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(V,null)),A)}},[[36,1,2]]]);
//# sourceMappingURL=main.0f3466c9.chunk.js.map